<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ResNet-50 FPGA 加速器 · CanShine</title>
    <meta name="description" content="面向 ResNet-50 的高性能 FPGA 卷积加速器，国家级专项重点项目，基于多级缓存协同与算子融合技术的定制化计算架构。" />
    <link rel="stylesheet" href="../styles.css?v=20260228-1" />
    <script src="../gate.js"></script>
  </head>
  <body class="project-page">
    <div class="bg-grid"></div>
    <header class="hero">
      <nav class="nav">
        <div class="brand">CanShine</div>
        <div class="nav-links">
          <a href="../index.html#projects">返回项目</a>
          <a href="../index.html#awards">奖项</a>
          <a href="../index.html#contact">联系</a>
        </div>
        <a class="nav-cta" href="../index.html">返回主页</a>
      </nav>

      <div class="hero-content">
        <div class="hero-left">
          <p class="badge">国家级专项重点项目 · 经费 6000 万元</p>
          <h1>面向 ResNet-50 的高性能 FPGA 卷积加速器</h1>
          <p class="subtitle">
            基于多级缓存协同与算子融合技术的定制化计算架构<br />
            FPGA Lead Architect · 硬件架构负责人
          </p>
          <div class="hero-actions">
            <a class="primary" href="#innovations">核心技术</a>
            <a class="ghost" href="#metrics">性能指标</a>
          </div>
        </div>
        <div class="hero-right">
          <div class="glass-card">
            <div class="card-title">项目亮点</div>
            <ul class="list">
              <li>乒乓缓存机制隐藏 DDR 访存延迟，推理延迟降低 ~14%</li>
              <li>Conv / ResAdd + ReLU 算子融合，消除中间数据回写</li>
              <li>VLIW 调度 + 残差旁路复用，资源占用 DSP &lt;2% / LUT &lt;4%</li>
              <li>300 MHz 时序完全收敛（WNS &gt; 0ns），板级长时间稳定运行</li>
            </ul>
            <div class="card-title">技术栈</div>
            <div class="chip-row">
              <span class="chip">SystemVerilog</span>
              <span class="chip">FPGA</span>
              <span class="chip">AXI4-Full</span>
              <span class="chip">AXI-Lite</span>
              <span class="chip">Python</span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- 项目背景 -->
    <section class="section" id="context">
      <h2>项目背景</h2>
      <p class="section-desc">
        国家级专项重点项目中的 AI 子系统设计。FPGA 需在同片承载 SAR 信号处理、高速接口等<strong>多个高优先级模块共存</strong>
        的高密度集成环境下，在极窄资源窗口内完成高性能 ResNet-50 推理加速，并作为<strong>总线友好型独立 IP</strong> 挂载于 AXI 互连。
      </p>
      <div class="detail-grid">
        <div>
          <h4>项目归属</h4>
          <p><strong>国家级专项重点项目</strong></p>
          <p style="margin-top:6px">项目经费：6000 万元</p>
        </div>
        <div>
          <h4>担任角色</h4>
          <p><strong>FPGA Lead Architect · 硬件架构负责人</strong></p>
          <p style="margin-top:6px">
            在距结项仅 <strong>6 个月</strong> 的关键节点接手，完成从遗留代码到完整架构的全面重构。
          </p>
        </div>
        <div>
          <h4>核心挑战</h4>
          <ul>
            <li>高优先级模块强势占用 AXI 总线带宽与 DSP 资源</li>
            <li>遗留 RTL 存在软件化与时序违例问题，需彻底重构</li>
            <li>须设计为「总线好公民」，不干扰主业务逻辑</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- 架构方案 -->
    <section class="section" id="architecture">
      <h2>架构方案：存算协同体系</h2>
      <p class="section-desc">
        摒弃通用处理器模式，采用 <strong>VLIW 指令驱动</strong> 的独立 IP 架构，通过 <strong>AXI-Lite</strong> 配置
        与 <strong>AXI-Full</strong> 大位宽数据搬运，实现计算与访存的深度解耦。
      </p>
      <figure style="margin:0 0 24px">
        <img
          src="../assets/projects/resnet/顶层架构图.png"
          alt="ResNet-50 FPGA 加速器顶层架构图"
          style="width:100%;max-width:960px;display:block;margin:0 auto;border-radius:8px"
        />
        <figcaption style="text-align:center;margin-top:8px;font-size:0.85rem;color:var(--text-2)">
          图 1 &nbsp;·&nbsp; 控制 / DMA / 缓存 / 计算四位一体的 FPGA 加速器顶层架构
        </figcaption>
      </figure>
      <div class="detail-grid">
        <div>
          <h4>模块化 IP 设计</h4>
          <p>
            纯 PL 侧独立加速器，集成 <strong>控制单元、Lite-DMA、片上 BRAM 缓存池、PE 计算阵列</strong> 四大核心。
            PS 端仅负责顶层调度，CPU 算力完全释放。
          </p>
        </div>
        <div>
          <h4>二级异构存储</h4>
          <p>
            构建「<strong>片外 DDR → 片上 BRAM 缓存池</strong>」体系，Lite-DMA 在获得总线授权的瞬间进行
            <strong>极速突发传输</strong>，抢入数据后立即释放总线，保障高优先级任务不被阻塞。
          </p>
        </div>
        <div>
          <h4>VLIW 指令调度</h4>
          <p>
            自定义 VLIW 指令集精确编排计算、访存、配置操作，消除流水线气泡，
            降低控制延迟，实现计算阵列<strong>持续满载</strong>。
          </p>
        </div>
      </div>
    </section>

    <!-- 关键技术 -->
    <section class="section" id="innovations">
      <h2>架构创新与关键技术</h2>
      <div class="info-grid">
        <div class="info-card">
          <div class="info-icon">⚡</div>
          <h3>多级缓存与带宽隐藏</h3>
          <p>
            设计输入/输出双向 <strong>乒乓缓存</strong> 机制，实现"零等待"计算。
            当前缓冲块正在参与计算的同时，DMA 已在后台预取下一块数据，
            有效隐藏高负载环境下的 DDR 访存开销。
          </p>
          <p style="margin-top:8px;font-size:0.9rem;color:var(--accent)">
            推理延迟降低 ~14%（401.2 ms → 345.8 ms）
          </p>
        </div>
        <div class="info-card">
          <div class="info-icon">🔗</div>
          <h3>算子融合与访存裁剪</h3>
          <p>
            构建 <strong>Conv / ResAdd + ReLU</strong> 的寄存器级流水线级联，
            三个算子在单次数据通过中完成，消除中间结果的片外回写，
            显著降低总线压力与动态功耗。
          </p>
          <p style="margin-top:8px;font-size:0.9rem;color:var(--accent)">
            中间数据传输量减少 ~60%，片外带宽需求大幅降低
          </p>
        </div>
        <div class="info-card">
          <div class="info-icon">📐</div>
          <h3>资源复用与极简架构</h3>
          <p>
            <strong>VLIW 调度</strong> 降低控制开销，<strong>残差主旁路</strong>共用计算与存储资源，
            消除冗余资源闲置。针对 DDR 4KB 边界限制实现硬件自动拆分，无需软件干预。
          </p>
          <p style="margin-top:8px;font-size:0.9rem;color:var(--accent)">
            DSP &lt;2% / LUT &lt;4%，多系统稳定共存
          </p>
        </div>
      </div>
    </section>

    <!-- 实测性能 -->
    <section class="section" id="metrics">
      <h2>实测性能与扩展性评估</h2>
      <p class="section-desc">
        当前在多系统共存模式（Coexistence Mode）下的实测数据，以及全片专用模式下的算力扩展分析。
      </p>
      <div class="hero-stats" style="justify-content:center;gap:32px;flex-wrap:wrap;margin-bottom:32px">
        <div class="stat">
          <div class="stat-num">2.89 FPS</div>
          <div class="stat-label">推理帧率 @ 共存模式</div>
        </div>
        <div class="stat">
          <div class="stat-num">38.4 GOPS</div>
          <div class="stat-label">等效算力（对标 i5 CPU）</div>
        </div>
        <div class="stat">
          <div class="stat-num">300 MHz</div>
          <div class="stat-label">运行主频（WNS &gt; 0ns）</div>
        </div>
      </div>
      <div class="detail-grid">
        <div>
          <h4>💾 资源占用（共存约束）</h4>
          <ul>
            <li><strong>DSP &lt; 2%</strong>：为信号处理模块留足算力</li>
            <li><strong>LUT &lt; 4%</strong>：余量充足，系统集成无压力</li>
            <li>300 MHz 高频下长时间板级运行稳定</li>
          </ul>
        </div>
        <div>
          <h4>🚀 全片扩展性分析</h4>
          <ul>
            <li>当前 8×8 → 扩展至 <strong>64×64 通道并行</strong></li>
            <li>预估算力 <strong>~1.6 TOPS</strong>，帧率 <strong>100+ FPS</strong> @200MHz</li>
            <li>AXI 总线全满载利用率 ~90%，带宽与计算完美匹配</li>
          </ul>
        </div>
        <div>
          <h4>📉 延迟优化成果</h4>
          <ul>
            <li>乒乓缓存引入前：401.2 ms / 帧</li>
            <li>优化后：<strong>345.8 ms / 帧</strong></li>
            <li>降幅 ~14%，资源零额外消耗</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- 系统验证 -->
    <section class="section" id="verification">
      <h2>系统闭环与验证</h2>
      <p class="section-desc">
        基于软硬协同的验证策略，确保硬件推理结果与浮点参考模型一致，
        并在 MPSoC 板级完成端到端全流程验证。
      </p>
      <div class="detail-grid">
        <div>
          <h4>Python 黄金模型</h4>
          <p>
            以 Python 搭建逐层定点化的 ResNet-50 黄金模型，
            逐 tensor 对比 RTL 仿真输出与浮点参考值，
            硬件推理精度稳定达到 <strong>90%+</strong>。
          </p>
        </div>
        <div>
          <h4>SystemVerilog 仿真</h4>
          <p>
            模块级仿真覆盖：Lite-DMA 突发读写边界、乒乓缓存切换时序、
            算子融合流水线握手信号，确保各模块在 corner case 下无数据撕裂。
          </p>
        </div>
        <div>
          <h4>板级全流程验证</h4>
          <p>
            在 MPSoC 平台完成 PS + PL 联合部署，
            <strong>300 MHz</strong> 高频下长时间压力测试通过，
            系统运行稳定，无时序违例（WNS &gt; 0ns）。
          </p>
        </div>
      </div>
    </section>

    <!-- 技术探讨 -->
    <section class="section" id="discussion">
      <h2>技术探讨</h2>
      <p class="section-desc">
        本页面展示了加速器的工程实现与架构上限评估。
        关于「<strong>自定义 VLIW 指令集的解码逻辑</strong>」「<strong>高负载混合系统中的时序收敛技巧</strong>」
        以及「<strong>大规模并行下的布线拥塞规避与 Floorplanning 策略</strong>」等深度细节，
        欢迎在专业交流中展开进一步探讨。
      </p>
      <div class="hero-actions" style="margin-top:24px">
        <a class="primary" href="../index.html#contact">联系交流</a>
        <a class="ghost" href="../index.html#projects">查看其他项目</a>
      </div>
    </section>

    <footer class="footer">
      <div>© CanShine · 个人展示页</div>
      <a href="#top">返回顶部 ↑</a>
    </footer>
  </body>
</html>
