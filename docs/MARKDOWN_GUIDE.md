# Markdown 写作规范（避免警告/报错）

本文档是一份“能稳定通过常见 Markdown 规则检查”的写作规范，目标是：

- 在 GitHub、VS Code、静态站点等环境中渲染一致
- 尽量不触发 markdownlint 等常见规则的 warning/error
- 与本仓库的格式化习惯一致（Prettier + EditorConfig）

---

## 0) 你需要知道的两件事

- **Prettier 是“格式化器”，不是“语义规范检查器”**：它会统一缩进、换行、引号等，但不保证所有 markdownlint 规则都不报警。
- **很多 Markdown 警告来自“空行、列表、强调符号、代码块”**：只要养成固定写法，基本能避免 90% 的问题。

---

## 1) 通用规则（最重要）

### 1.1 统一换行与空格

- 每个文件末尾保留 1 个换行
- 不要在行尾加多余空格（除非你明确要 Markdown 的硬换行）
- 段落之间用 **1 个空行** 分隔，不要连续多个空行

### 1.2 标题写法

- 使用 ATX 标题（`#` / `##` / `###`），不要混用 Setext 标题（用 `===` 或 `---` 的那种）
- `#` 后必须有一个空格
- 标题前后都建议留空行（尤其在标题前）

推荐模板：

```markdown
## 二级标题

这里是一段正文。

### 三级标题

这里是更多正文。
```

### 1.3 列表写法

- 列表前后建议留空行
- 统一用 `-` 作为无序列表标记
- 列表项较长时，换行后的内容与正文对齐（建议缩进 2 空格）

推荐模板：

```markdown
- 第一项
- 第二项：如果内容很长，
  换行后对齐并缩进 2 个空格
```

**任务清单（checkbox）**：

```markdown
- [ ] TODO：未完成
- [x] DONE：已完成
```

**有序列表（避免 MD029）**：

很多检查器要求有序列表统一使用 `1.` 作为前缀（由渲染器自动显示为 1/2/3）。

```markdown
1. 第一步
1. 第二步
1. 第三步
```

### 1.4 代码块写法

- 统一使用“围栏代码块”（fenced code block）：三个反引号
- 尽量写明语言（避免 MD040）：`bash`/`text`/`json`/`verilog` 等
- 代码块前后都留空行

推荐模板：

````markdown
```bash
npm run format
```

```verilog
always_ff @(posedge clk) begin
  // ...
end
```
````

### 1.5 链接与图片

- 链接：`[显示文本](URL)`
- 图片：`![alt 文本](路径或 URL)`
- alt 文本不要留空（可读性与可访问性更好）

避免裸链接（MD034）：不要直接写 `https://example.com`，而是写成可点击链接：

```markdown
[https://example.com](https://example.com)
```

推荐写法（仓库内相对链接）：

```markdown
更多规范见 [PRIVACY_GUIDE.md](PRIVACY_GUIDE.md)。
```

推荐写法（链接到仓库文件的某一行）：

```markdown
参考实现见 [script.js#L1](../script.js#L1)。
```

#### 1.5.1 图片的相对路径

在本仓库中，文档在 `docs/` 目录时，引用根目录资源常见写法：

```markdown
![项目架构图](../assets/projects/xxx/arch.svg)
```

### 1.6 图表（表格 / 流程图 / 时序图）

“图表”在 Markdown 里常见三种形式：

- **表格**：适合参数对照、指标汇总
- **图片**：适合架构图、波形截图、实验结果图
- **Mermaid 图**（若渲染环境支持）：适合流程图/时序图/状态机

#### 1.6.1 Mermaid 图（推荐：用于 docs）

GitHub 的 Markdown 现在通常支持 Mermaid（在渲染时会生成图）。写法如下：

````markdown
```mermaid
flowchart TD
  A[需求] --> B[设计]
  B --> C[验证]
  C --> D[发布]
```
````

注意：

- Mermaid 代码块前后要留空行
- 如果你的页面（GitHub Pages 的 HTML）没有引入 Mermaid 渲染脚本，那么在网页里不一定会自动渲染；在 `docs/*.md`（GitHub 页面）里阅读更稳。

---

## 2) 最容易踩坑的规则与写法

### 2.1 避免 MD037：强调符号里有空格

典型原因：你写了占位符 `___`、或用了 `<填写>` 这种尖括号占位符，渲染/检查时容易被当成 HTML 或强调语法的一部分。

推荐占位符写法（最安全）：

- 用中文括号：`（填写）`
- 或用方括号：`[填写]`

例如：

```markdown
- 频率：（填写）MHz
- 资源：LUT（填写）/ FF（填写）/ BRAM（填写）/ DSP（填写）
```

不推荐：

- `___`（容易触发强调相关规则）
- `<填写>`（容易被当成 HTML 标签或触发解析差异）

### 2.2 标题/列表周围缺空行（常见：MD022/MD032）

很多检查器要求：标题前后、列表前后要有空行。

推荐：

```markdown
一段正文。

## 标题

- 列表项 A
- 列表项 B

下一段正文。
```

### 2.3 代码块前后缺空行（常见：MD031）

推荐：

````markdown
上一段正文。

```text
这里是代码块
```

下一段正文。
````

### 2.4 同一层级标题跳级

不要从 `##` 直接跳到 `####`。

推荐层级：

- `#`：文档标题（1 个）
- `##`：主章节
- `###`：小节
- `####`：更细的点（可选）

### 2.5 表格容易“看着对但报错”

- 表格前后也建议留空行
- 表头分隔线使用 `| --- |` 形式
- 尽量不要在表格单元格里塞多行内容

推荐：

```markdown
| 字段 | 含义     |
| ---- | -------- |
| fmax | 最高频率 |
| LUT  | 资源占用 |
```

#### 2.5.1 表格里的特殊字符

- 单元格里如果要写 `|`，需要转义成 `\|`
- 单元格里尽量不要换行（很多渲染器支持不好）

---

### 2.6 超链接常见坑（相对路径 / 锚点 / 引用式）

#### 2.6.1 相对路径

- 从 `docs/xxx.md` 链接到根目录：用 `../`
- 从根目录链接到 `docs/`：用 `docs/`

示例：

```markdown
从 docs 链到根目录 README： [README](../README.md)
从 docs 链到同目录文件： [PROJECT_GUIDE](PROJECT_GUIDE.md)
```

#### 2.6.2 锚点链接（目录内跳转）

同一篇文档里可以链接到标题（锚点名由渲染器生成）。推荐在 VS Code 或 GitHub 上复制标题链接，避免手写出错。

示例：

```markdown
跳到“表格”小节： [表格](#25-表格容易看着对但报错)
```

#### 2.6.3 引用式链接（适合链接很多的文章）

```markdown
更多资料见 [ZipCPU][zipcpu]。

[zipcpu]: https://zipcpu.com/
```

---

### 2.7 公式（LaTeX/数学表达）

#### 2.7.1 在哪里能显示公式？

- GitHub 的 Markdown 现在通常支持 LaTeX 数学公式（`$...$` 与 `$$...$$`）。
- 但在你自己的静态网页（GitHub Pages 的 `index.html`）里，默认不会渲染 LaTeX，除非你额外引入 MathJax/KaTeX。

#### 2.7.2 推荐写法

行内公式：

```markdown
时钟周期为 $T=1/f$。
```

块级公式：

```markdown
$$
T = \frac{1}{f}
$$
```

#### 2.7.3 公式里容易踩的坑

- 下划线 `_`、星号 `*` 等符号在 Markdown 里可能触发强调语法，放在 `$...$` 里通常没问题，但在普通文本里要小心。
- 如果你的编辑器/检查器对数学不友好，保底方案是用代码块表达：

````markdown
```text
T = 1 / f
```
````

---

## 3) 建议的写作“安全模板”（直接复制用）

### 3.1 项目小节模板

```markdown
## 项目名（方向）

一句话：这个项目解决了什么问题。

- 你的职责：
  - （填写）
- 架构：
  - （填写）
- 难点与解决：
  - 问题：… → 方案：… → 结果：…
- 指标：
  - 频率：（填写）MHz
  - 资源：LUT（填写）/ FF（填写）/ BRAM（填写）/ DSP（填写）
- 验证：
  - （填写）
```

### 3.2 博客文章模板

```markdown
# 标题

一句话总结：这篇文章解决什么问题。

## 适用场景

- （填写）

## 核心结论

- （填写）

## 常见坑点

- （填写）

## 参考资料

- （填写）
```

---

## 4) 本仓库推荐工作流

- 写完或改完文档后跑一次格式化：

```bash
npm run format
```

- 如果你看到 VS Code 的 Markdown 警告：
  - 先对照本文档的“空行 / 列表 / 强调 / 代码块”四类问题排查
  - 仍然不确定的话，把报错规则号（例如 `MD037`）发我，我可以按具体规则帮你改到干净
